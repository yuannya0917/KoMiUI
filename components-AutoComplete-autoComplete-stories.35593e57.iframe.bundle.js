"use strict";(self.webpackChunkkohmin_ui=self.webpackChunkkohmin_ui||[]).push([[397],{"./src/components/AutoComplete/autoComplete.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AsynchronousSearch:()=>AsynchronousSearch,CustomSearch:()=>CustomSearch,Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>autoComplete_stories});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),react=__webpack_require__("./node_modules/react/index.js"),input=__webpack_require__("./src/components/Input/input.tsx"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),icon=__webpack_require__("./src/components/Icon/icon.tsx");const hooks_useDebounce=function useDebounce(value){let wait=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;const[debouncedValue,setDebouncedValue]=(0,react.useState)(value);return(0,react.useEffect)((()=>{const handler=window.setTimeout((()=>{setDebouncedValue(value)}),wait);return()=>{clearTimeout(handler)}}),[value,wait]),debouncedValue};const hooks_useClickOutside=function useClickOutside(ref,handler){(0,react.useEffect)((()=>{const listener=event=>{ref.current&&!ref.current.contains(event.target)&&handler(event)};return document.addEventListener("click",listener),()=>{document.removeEventListener("click",listener)}}),[ref,handler])};var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const _excluded=["fetchSuggestion","onSelect","value","renderOption"],AutoComplete=_ref=>{let{fetchSuggestion,onSelect,value,renderOption}=_ref,restProps=(0,objectWithoutProperties.A)(_ref,_excluded);const[inputValue,setInputValue]=(0,react.useState)(""),[suggesstions,setSuggestions]=(0,react.useState)([]),[loading,setLoading]=(0,react.useState)(!1),[highlightIndex,setHighlightIndex]=(0,react.useState)(-1),nodeRef=(0,react.useRef)(null),triggerSearch=(0,react.useRef)(!1),componentRef=(0,react.useRef)(null),debouncedValue=hooks_useDebounce(inputValue,500);hooks_useClickOutside(componentRef,(()=>{setSuggestions([])})),(0,react.useEffect)((()=>{if(triggerSearch.current&&debouncedValue){const result=fetchSuggestion(debouncedValue);result instanceof Promise?(console.log("triggered"),setLoading(!0),result.then((data=>{setLoading(!1),setSuggestions(data)}))):setSuggestions(result)}else setSuggestions([]);setHighlightIndex(-1)}),[debouncedValue]);const highlight=index=>{index<0&&(index=0),index>=suggesstions.length&&(index=suggesstions.length-1),setHighlightIndex(index)},handleSelect=item=>{setInputValue(item.value),setSuggestions([]),onSelect&&onSelect(item),triggerSearch.current=!1},renderTemplete=item=>renderOption?renderOption(item):item.value;return(0,jsx_runtime.jsxs)("div",{className:"komi-auto-complete",ref:componentRef,children:[(0,jsx_runtime.jsx)(input.A,(0,objectSpread2.A)({value:inputValue,onChange:e=>{const value=e.target.value.trim();setInputValue(value),triggerSearch.current=!0},onKeyDown:e=>{switch(e.keyCode){case 13:suggesstions[highlightIndex]&&handleSelect(suggesstions[highlightIndex]);break;case 38:highlight(highlightIndex-1);break;case 40:highlight(highlightIndex+1)}}},restProps)),loading&&(0,jsx_runtime.jsx)("ul",{className:"ul-icon",children:(0,jsx_runtime.jsx)(icon.A,{icon:"spinner",spin:!0,className:"auto-complete-icon"})}),suggesstions.length>0&&(0,jsx_runtime.jsx)("ul",{ref:nodeRef,children:suggesstions.map(((item,index)=>{const cnames=classnames_default()("suggestion-item",{"item-highlighted":index===highlightIndex});return(0,jsx_runtime.jsx)("li",{className:cnames,onClick:()=>handleSelect(item),children:renderTemplete(item)},index)}))})]})},AutoComplete_autoComplete=AutoComplete;try{AutoComplete.displayName="AutoComplete",AutoComplete.__docgenInfo={description:"",displayName:"AutoComplete",props:{fetchSuggestion:{defaultValue:null,description:"",name:"fetchSuggestion",required:!0,type:{name:"(str: string) => DataSourceObject[] | Promise<DataSourceObject[]>"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!1,type:{name:"((item: DataSourceObject) => void)"}},renderOption:{defaultValue:null,description:"",name:"renderOption",required:!1,type:{name:"((item: DataSourceObject) => ReactElement<unknown, string | JSXElementConstructor<any>>)"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"lg"'},{value:'"sm"'}]}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},icon:{defaultValue:null,description:"",name:"icon",required:!1,type:{name:"IconProp"}},prepend:{defaultValue:null,description:"",name:"prepend",required:!1,type:{name:"string | ReactElement<unknown, string | JSXElementConstructor<any>>"}},append:{defaultValue:null,description:"",name:"append",required:!1,type:{name:"string | ReactElement<unknown, string | JSXElementConstructor<any>>"}},onIconClick:{defaultValue:null,description:"",name:"onIconClick",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/AutoComplete/autoComplete.tsx#AutoComplete"]={docgenInfo:AutoComplete.__docgenInfo,name:"AutoComplete",path:"src/components/AutoComplete/autoComplete.tsx#AutoComplete"})}catch(__react_docgen_typescript_loader_error){}try{autoComplete.displayName="autoComplete",autoComplete.__docgenInfo={description:"",displayName:"autoComplete",props:{fetchSuggestion:{defaultValue:null,description:"",name:"fetchSuggestion",required:!0,type:{name:"(str: string) => DataSourceObject[] | Promise<DataSourceObject[]>"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!1,type:{name:"((item: DataSourceObject) => void)"}},renderOption:{defaultValue:null,description:"",name:"renderOption",required:!1,type:{name:"((item: DataSourceObject) => ReactElement<unknown, string | JSXElementConstructor<any>>)"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"lg"'},{value:'"sm"'}]}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},icon:{defaultValue:null,description:"",name:"icon",required:!1,type:{name:"IconProp"}},prepend:{defaultValue:null,description:"",name:"prepend",required:!1,type:{name:"string | ReactElement<unknown, string | JSXElementConstructor<any>>"}},append:{defaultValue:null,description:"",name:"append",required:!1,type:{name:"string | ReactElement<unknown, string | JSXElementConstructor<any>>"}},onIconClick:{defaultValue:null,description:"",name:"onIconClick",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/AutoComplete/autoComplete.tsx#autoComplete"]={docgenInfo:autoComplete.__docgenInfo,name:"autoComplete",path:"src/components/AutoComplete/autoComplete.tsx#autoComplete"})}catch(__react_docgen_typescript_loader_error){}const testArray=[{value:"南京大学",city:"南京"},{value:"东南大学",city:"南京"},{value:"南京理工大学",city:"南京"},{value:"苏州大学",city:"苏州"},{value:"江南大学",city:"无锡"},{value:"中国矿业大学",city:"徐州"},{value:"南京航空航天大学",city:"南京"},{value:"南京农业大学",city:"南京"},{value:"南京师范大学",city:"南京"},{value:"扬州大学",city:"扬州"},{value:"常州大学",city:"常州"},{value:"淮阴工学院",city:"淮安"},{value:"盐城工学院",city:"盐城"},{value:"南京工业大学",city:"南京"},{value:"南京医科大学",city:"南京"}],autoComplete_stories={title:"AutoComplete",component:AutoComplete_autoComplete,parameters:{docs:{story:{height:"200px"},description:{component:"import {AutoComplete} from 'kohmin-ui'"}},layout:"center"},argTypes:{fetchSuggestion:{description:"返回输入建议的方法，可以拿到当前的输入，然后返回同步的数组或者是异步的 Promise type DataSourceType = T & DataSourceObject"},onSelect:{description:"点击选中建议项时触发的回调"},onChange:{description:"文本框发生改变的时候触发的事件"},renderOption:{description:"支持自定义渲染下拉项，返回 ReactElement"},size:{description:"设置 input 大小，支持 lg 或者是 sm"},disabled:{description:"是否禁用 Input"},icon:{description:"添加图标，在右侧悬浮添加一个图标，用于提示"},prepend:{description:"添加前缀 用于配置一些固定组合"},append:{description:"添加后缀 用于配置一些固定组合"},onIconClick:{description:"有icon时点击后执行的函数"}}},Default={args:{fetchSuggestion:query=>testArray.filter((item=>item.value.includes(query)))},render:args=>(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(AutoComplete_autoComplete,(0,objectSpread2.A)({},args))})},CustomSearch={args:{fetchSuggestion:query=>testArray.filter((item=>item.value.includes(query))),placeholder:"输入江苏大学的名称，自定义下拉模板",renderOption:item=>{const itemWithCity=item;return(0,jsx_runtime.jsxs)("div",{style:{display:"flex"},children:[(0,jsx_runtime.jsxs)("b",{style:{marginRight:"20px"},children:["学校名称：",itemWithCity.value]}),(0,jsx_runtime.jsxs)("span",{children:["所属城市：",itemWithCity.city]})]})}},render:args=>(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(AutoComplete_autoComplete,(0,objectSpread2.A)({},args))})},AsynchronousSearch={args:{fetchSuggestion:query=>fetch("https://api.github.com/search/users?q=".concat(query)).then((res=>res.json())).then((_ref=>{let{items}=_ref;return items.slice(0,10).map((item=>(0,objectSpread2.A)({value:item.login},item)))})),placeholder:"输入Github用户名",renderOption:item=>{const itemWithGithub=item;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("b",{style:{marginRight:"20px"},children:["Name: ",itemWithGithub.value]}),(0,jsx_runtime.jsxs)("span",{children:["url: ",itemWithGithub.url]})]})}},render:args=>(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(AutoComplete_autoComplete,(0,objectSpread2.A)({},args))})},__namedExportsOrder=["Default","CustomSearch","AsynchronousSearch"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  args: {\n    fetchSuggestion: (query: string) => {\n      return testArray.filter(item => item.value.includes(query));\n    }\n  },\n  render: args => {\n    return <>\r\n                <AutoComplete {...args} />\r\n            </>;\n  }\n}",...Default.parameters?.docs?.source}}},CustomSearch.parameters={...CustomSearch.parameters,docs:{...CustomSearch.parameters?.docs,source:{originalSource:"{\n  args: {\n    fetchSuggestion: (query: string) => {\n      return testArray.filter(item => item.value.includes(query));\n    },\n    placeholder: \"输入江苏大学的名称，自定义下拉模板\",\n    renderOption: (item: DataSourceType) => {\n      const itemWithCity = item as DataSourceType<JSUniversityProps>;\n      return <div style={{\n        display: 'flex'\n      }}>\r\n                        <b style={{\n          marginRight: '20px'\n        }}>学校名称：{itemWithCity.value}</b>\r\n                        <span>所属城市：{itemWithCity.city}</span>\r\n                    </div>;\n    }\n  },\n  render: args => {\n    return <>\r\n                <AutoComplete {...args}></AutoComplete>\r\n            </>;\n  }\n}",...CustomSearch.parameters?.docs?.source}}},AsynchronousSearch.parameters={...AsynchronousSearch.parameters,docs:{...AsynchronousSearch.parameters?.docs,source:{originalSource:"{\n  args: {\n    fetchSuggestion: (query: string) => {\n      return fetch(`https://api.github.com/search/users?q=${query}`).then(res => res.json()).then(({\n        items\n      }) => {\n        return items.slice(0, 10).map((item: any) => ({\n          value: item.login,\n          ...item\n        }));\n      });\n    },\n    placeholder: \"输入Github用户名\",\n    renderOption: (item: DataSourceType) => {\n      const itemWithGithub = item as DataSourceType<GithubUserProps>;\n      return <>\r\n                    <b style={{\n          marginRight: '20px'\n        }}>Name: {itemWithGithub.value}</b>\r\n                    <span>url: {itemWithGithub.url}</span>\r\n                  </>;\n    }\n  },\n  render: args => {\n    return <>\r\n                <AutoComplete {...args}></AutoComplete>\r\n            </>;\n  }\n}",...AsynchronousSearch.parameters?.docs?.source}}}},"./src/components/Icon/icon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var C_Users_yuan_Desktop_KoMiUI_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),C_Users_yuan_Desktop_KoMiUI_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),classnames__WEBPACK_IMPORTED_MODULE_1__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/classnames/index.js")),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@fortawesome/free-solid-svg-icons/index.mjs"),_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@fortawesome/react-fontawesome/index.es.js"),_fortawesome_fontawesome_svg_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@fortawesome/fontawesome-svg-core/index.mjs"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");const _excluded=["className","theme"];_fortawesome_fontawesome_svg_core__WEBPACK_IMPORTED_MODULE_3__.Yv.add(_fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_5__.X7I);const __WEBPACK_DEFAULT_EXPORT__=_ref=>{let{className,theme}=_ref,restProps=(0,C_Users_yuan_Desktop_KoMiUI_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_6__.A)(_ref,_excluded);const classes=classnames__WEBPACK_IMPORTED_MODULE_1___default()("komi-icon",className,{["icon-".concat(theme)]:theme});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_2__.g,(0,C_Users_yuan_Desktop_KoMiUI_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__.A)({className:classes},restProps))};try{icon.displayName="icon",icon.__docgenInfo={description:"",displayName:"icon",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"enum",value:[{value:'"info"'},{value:'"warning"'},{value:'"primary"'},{value:'"danger"'},{value:'"success"'},{value:'"secondary"'},{value:'"light"'},{value:'"dark"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Icon/icon.tsx#icon"]={docgenInfo:icon.__docgenInfo,name:"icon",path:"src/components/Icon/icon.tsx#icon"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/Input/input.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__,p:()=>Input});var C_Users_yuan_Desktop_KoMiUI_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),C_Users_yuan_Desktop_KoMiUI_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),classnames__WEBPACK_IMPORTED_MODULE_1__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/classnames/index.js")),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_Icon_icon__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/Icon/icon.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");const _excluded=["disabled","size","icon","prepend","append","style","className","onIconClick"],Input=_ref=>{let{disabled=!1,size,icon,prepend,append,style,className,onIconClick}=_ref,restProps=(0,C_Users_yuan_Desktop_KoMiUI_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_4__.A)(_ref,_excluded);const classes=classnames__WEBPACK_IMPORTED_MODULE_1___default()("komi-input-wrapper",className,{["input-size-".concat(size)]:size,"is-disabled":disabled,"input-group":prepend||append,"input-group-prepend":prepend,"input-group-append":append});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{className:classes,style,children:[prepend&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:"komi-input-group-prepend",children:prepend}),icon&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:"icon-wrapper",onClick:disabled?void 0:onIconClick,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_Icon_icon__WEBPACK_IMPORTED_MODULE_2__.A,{icon,className:"input-icon","data-testid":"icon"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("input",(0,C_Users_yuan_Desktop_KoMiUI_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.A)({className:"komi-input-inner",disabled},restProps)),append&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:"komi-input-group-append",children:append})]})},__WEBPACK_DEFAULT_EXPORT__=Input;try{Input.displayName="Input",Input.__docgenInfo={description:"",displayName:"Input",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"lg"'},{value:'"sm"'}]}},icon:{defaultValue:null,description:"",name:"icon",required:!1,type:{name:"IconProp"}},prepend:{defaultValue:null,description:"",name:"prepend",required:!1,type:{name:"string | ReactElement<unknown, string | JSXElementConstructor<any>>"}},append:{defaultValue:null,description:"",name:"append",required:!1,type:{name:"string | ReactElement<unknown, string | JSXElementConstructor<any>>"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},onIconClick:{defaultValue:null,description:"",name:"onIconClick",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Input/input.tsx#Input"]={docgenInfo:Input.__docgenInfo,name:"Input",path:"src/components/Input/input.tsx#Input"})}catch(__react_docgen_typescript_loader_error){}try{input.displayName="input",input.__docgenInfo={description:"",displayName:"input",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"lg"'},{value:'"sm"'}]}},icon:{defaultValue:null,description:"",name:"icon",required:!1,type:{name:"IconProp"}},prepend:{defaultValue:null,description:"",name:"prepend",required:!1,type:{name:"string | ReactElement<unknown, string | JSXElementConstructor<any>>"}},append:{defaultValue:null,description:"",name:"append",required:!1,type:{name:"string | ReactElement<unknown, string | JSXElementConstructor<any>>"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},onIconClick:{defaultValue:null,description:"",name:"onIconClick",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Input/input.tsx#input"]={docgenInfo:input.__docgenInfo,name:"input",path:"src/components/Input/input.tsx#input"})}catch(__react_docgen_typescript_loader_error){}}}]);